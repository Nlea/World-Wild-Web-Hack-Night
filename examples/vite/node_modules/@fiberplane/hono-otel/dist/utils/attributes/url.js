import { getRedactedQueryParams, getShouldTraceEverything } from "../../config/index.js";
export function getRedactedUrl(url, config) {
    const shouldTraceEverything = getShouldTraceEverything(config);
    if (shouldTraceEverything) {
        return url.toString();
    }
    const redactedUrl = new URL(url.toString());
    const redactedQueryParams = getRedactedQueryParams(config);
    for (const [key] of redactedUrl.searchParams.entries()) {
        if (redactedQueryParams.has(key.toLowerCase())) {
            redactedUrl.searchParams.set(key, "REDACTED");
        }
    }
    return redactedUrl.toString();
}
